\chapter{Evaluation}
\label{ch:evaluation}

\begin{draft}
GLMTK by me was used for evaluation.
Commit before bachelor-thesis release.

Experiment to showcase (dis-)advantages of GLM to MKN.

Maybe Speedup-factor over time.

Experiments that combine metrices.

Experiments over time and space complexity.
\end{draft}

% ------------------------------------------------------------------------------
\section{Normalized Keystroke Savings}

\begin{draft}
How are they defined?
How do we calculate them?

From \textcite{Trnka2011}:
\begin{equation}
  \frac{\text{keystrokes}_\text{normal} - \text{keystrokes}_\text{with prediction}}
       {\text{keystrokes}_\text{normal}}
\end{equation}
We differ on how we count spaces, newlines, etc...
No keystroke for accepting completion.

NKSS for top-1 or top-5 completion.
\end{draft}

% ------------------------------------------------------------------------------
\section{Experimental setup}

\begin{draft}
Computer.

Corpora.
\textcite{OANC}
How to tokenize corpus?
Hard to without semantic knowledge.
Currently: all special characters are surrounded by spaces.
But \texttt{you're} becomes \texttt{you ' re}.
No stemming to normalize word forms.
Case-sensitive training and test data.
Kept names.

How to scale completion trie depth for word prediction experiments?
Remove sentences from corpus?
Remove entries of from completion trie?

Avoid unknown words / unknown ngrams in testing?

Because of JVM experiments need to be run multiple times.
Graphs then show average + variance (or rather standard deviation)?

How to calculate standard derivation?
Use \emph{sample standard deviation}?
Why divide by $N-1$ there?
\end{draft}

% ------------------------------------------------------------------------------
\section{Probability calculation}
\label{sec:evaluation-probability}

\begin{draft}
Experiment: Calculate one probability $\Prob{w_n}{w_1^{n-1}}$ with MKN and GLM
for recursive and weighted sum implementations for increasing $n$ and track
execution time.

Experiment: Calculate one probability $\Prob{w_n}{w_1^{n-1}}$ with weighted sum
MKN and GLM for increasing $n$ and track execution times of $\SumWeight^h_i$
calculation and remaining calculations.

For different percentages of seen sequences?

To showcase usefulness of weighted sum approach.

WSA as maximal optimization / baseline.
What is WSA again?

Number of weights per model.
\end{draft}

%\begin{figure}
%  \centering
%  \begin{addmargin}
%  %\begin{subfigure}{.45\textwidth}
%  \begin{minipage}{.6\textwidth}
%    \includestandalone[width=\textwidth]{figures/timemkn}
%    \caption{Lol the fuck you think you are doing?}
%  \end{minipage}
%  %\end{subfigure}
%  %\hspace{7.5em}
%  %\begin{subfigure}{.45\textwidth}
%  \begin{minipage}{.6\textwidth}
%    \includestandalone[width=\textwidth]{figures/timeglm}
%    \caption{TimeMKN + TimeGLM-Caption}
%  \end{minipage}
%  %\end{subfigure}
%  \end{addmargin}
%\end{figure}

% ------------------------------------------------------------------------------
\section{Word prediction calculation}

\begin{draft}
Experiment: show completion trie memory for n-gram lengths and MKN vs GLM.

Experiment: top-$1$ word prediction with na\"{\i}ve method, TA and NRA scale
trie depth track execution time and space requirements.

Experiment: top-$k$ word prediction with na\"{\i}ve method, TA and NRA scale
$k$ track execution time and space requirements.

Experiment: NKSS calculation with na\"{\i}ve method, TA and NRA for some fixed
$k$ scale completion trie depth.

Experiment with prefix?

How many words in vocab does each algorithm compute probability of?

All experiments for MKN and GLM?
Probably yes, to see if difference matters.

Completion Trie memory consumption relevant?

Random access from completion trie or from hash map?

Mention decreasingness (?) of data sets.
\end{draft}

\clearpage
\textbf{Note for Rene: The following figures are not yet final. For these
I didn't do any removal of outliers so you can see how problematic these huge
standard deviations are. Graphs for Top-k algorithms are outdated but I expect
them to not change to much.}

% ------------------------------------------------------------------------------
\clearpage
\thispagestyle{empty}
\newgeometry{left = 1cm, right = 1cm, top = 1cm, bottom = 1cm}
\begin{figure}[p]
  \centering
  \vspace*{\fill}

  \begin{minipage}{.45\textwidth}
    \raggedleft
    \includestandalone{figures/timemkn}
    \caption{Time to calculate one MKN probability using different
      $n$-gram lengths.}
  \end{minipage}
  \hspace{.02\textwidth}
  \begin{minipage}{.45\textwidth}
    \raggedright
    \includestandalone{figures/timeglm}
    \caption{Time to calculate one GLM probability using different
      $n$-gram lengths.}
  \end{minipage}

  \vspace*{.02\textwidth}

  \begin{minipage}{.45\textwidth}
    \raggedleft
    \includestandalone{figures/timemkn_split}
    \caption{Time split for weighted sum MKN weight calculation and remaining
      probability calculation.}
  \end{minipage}
  \hspace{.02\textwidth}
  \begin{minipage}{.45\textwidth}
    \raggedright
    \includestandalone{figures/timeglm_split}
    \caption{Time split for weighted sum GLM weight calculation and remaining
      probability calculation.}
  \end{minipage}

  \vspace*{.02\textwidth}

  \begin{minipage}{.45\textwidth}
    \raggedleft
    \includestandalone{figures/timemkn_weights}
    \caption{Number of Weights MKN}
  \end{minipage}
  \hspace{.02\textwidth}
  \begin{minipage}{.45\textwidth}
    \raggedright
    \includestandalone{figures/timeglm_weights}
    \caption{Number of Weights GLM}
  \end{minipage}

  \vspace*{\fill}
\end{figure}
\restoregeometry
\clearpage

% ------------------------------------------------------------------------------
\clearpage
\thispagestyle{empty}
\newgeometry{left = 1cm, right = 1cm, top = 1cm, bottom = 1cm}
\begin{figure}[p]
  \centering
  \vspace*{\fill}

  \begin{minipage}{.45\textwidth}
    \raggedleft
    \includestandalone{figures/timemkn_boxplot}
    \caption{Time to calculate one MKN probability using different
      $n$-gram models (box plot).}
  \end{minipage}
  \hspace{.02\textwidth}
  \begin{minipage}{.45\textwidth}
    \raggedright
    \includestandalone{figures/timeglm_boxplot}
    \caption{Time to calculate one GLM probability using different
      $n$-gram models (box plot).}
  \end{minipage}

  \vspace*{.02\textwidth}

  \begin{minipage}{0.45\textwidth}
    \includestandalone[width=\textwidth]{figures/timeargmaxn}
    \caption{Calculation time for top-$1$ prediction using different
      $n$-gram models.}
  \end{minipage}
  \hspace{.02\textwidth}
  \begin{minipage}{0.45\textwidth}
    \includestandalone[width=\textwidth]{figures/timeargmaxk}
    \caption{Calculation time for top-$k$ prediction using $5$-gram model.}
  \end{minipage}

  \vspace*{.02\textwidth}

  \begin{minipage}{0.45\textwidth}
    \includestandalone[width=\textwidth]{figures/timeargmaxnkss}
    \caption{Time to calculate NKSS using different $n$-gram lengths.}
  \end{minipage}
  \hspace{.02\textwidth}
  \begin{minipage}{0.45\textwidth}
    \includestandalone[width=\textwidth]{figures/numaccessargmax}
    \caption{Number of access for top-$k$ prediction using $5$-gram models.}
  \end{minipage}

  \vspace*{\fill}
\end{figure}
\restoregeometry
\clearpage

% ------------------------------------------------------------------------------
\clearpage
\thispagestyle{empty}
\newgeometry{left = 1cm, right = 1cm, top = 1cm, bottom = 1cm}
\begin{figure}[p]
  \centering
  \vspace*{\fill}

  \begin{minipage}{.45\textwidth}
    \includestandalone[width=\textwidth]{figures/argmax_time_n_ta}
    \caption{Prediction time for TA for different $n$-grams lengths and 1 prediction.}
  \end{minipage}
  \hspace{.02\textwidth}
  \begin{minipage}{.45\textwidth}
    \includestandalone[width=\textwidth]{figures/argmax_time_k_ta}
    \caption{Prediction time for TA for $k$ many predictions in a 5 gram model.}
  \end{minipage}

  \vspace*{.02\textwidth}

  \begin{minipage}{0.45\textwidth}
    \includestandalone[width=\textwidth]{figures/argmax_time_n_nra}
    \caption{Prediction time for NRA for different $n$-grams lengths and 1 prediction.}
  \end{minipage}
  \hspace{.02\textwidth}
  \begin{minipage}{0.45\textwidth}
    \includestandalone[width=\textwidth]{figures/argmax_time_k_nra}
    \caption{Prediction time for NRA for $k$ many predictions in a 5 gram model.}
  \end{minipage}

  \vspace*{.02\textwidth}

  \begin{minipage}{0.45\textwidth}
    \includestandalone[width=\textwidth]{figures/argmax_time_n_smpl}
    \caption{Prediction time for SMPL for different $n$-grams lengths and 1 prediction.}
  \end{minipage}
  \hspace{.02\textwidth}
  \begin{minipage}{0.45\textwidth}
    \includestandalone[width=\textwidth]{figures/argmax_time_k_smpl}
    \caption{Prediction time for SMPL for $k$ many predictions in a 5 gram model.}
  \end{minipage}

  \vspace*{\fill}
\end{figure}
\restoregeometry
\clearpage

% ------------------------------------------------------------------------------
\clearpage
\thispagestyle{empty}
\newgeometry{left = 1cm, right = 1cm, top = 1cm, bottom = 1cm}
\begin{figure}[p]
  \centering
  \vspace*{\fill}

  \begin{minipage}{.45\textwidth}
    \includestandalone[width=\textwidth]{figures/argmax_numaccesses_mkn}
    \caption{Number of Accesses per Algorithm for 1 prediction in a 5 gram model for MKN.}
  \end{minipage}
  \hspace{.02\textwidth}
  \begin{minipage}{.45\textwidth}
    \includestandalone[width=\textwidth]{figures/argmax_numaccesses_glm}
    \caption{Number of Accesses per Algorithm for 1 prediction in a 5 gram model for GLM.}
  \end{minipage}

  \vspace*{\fill}
\end{figure}
\restoregeometry
\clearpage


% ------------------------------------------------------------------------------
\section{Word prediction quality}

\begin{draft}
Is this section relevant for this thesis?

Experiment: NKSS quality of MKN vs GLM prediction for different $n$ and corpus
sizes.
\end{draft}
